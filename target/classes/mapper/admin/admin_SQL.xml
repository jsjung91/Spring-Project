<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin">

<insert id="memberInsert" parameterType="jeong.member.MemberVo">
	<![CDATA[
		insert into user_info
		(
			member_no,
			member_id,
			member_pwd,
			member_role,
			member_name,
			member_mail,
			member_phon,
			del_yn,
			ENABLED,
			reg_date
		) values (
			#{member_no},
			#{member_id},
			#{member_pwd},
			#{member_role},
			#{member_name},
			#{member_mail},
			#{member_phon},
			'N',
			'1',
			now()
		)
	]]>
</insert>

<insert id="memberDetailInsert" parameterType="jeong.member.MemberVo">
	<![CDATA[
		INSERT INTO USER_INFO_DETAIL
		
	]]>
</insert>

<update id="memberUpdate" parameterType="jeong.member.MemberVo">
	update
		user_info
	set
		member_pwd = #{member_pwd},
		member_role = #{member_role},
		member_mail = #{member_mail}
	where 
		member_no = #{member_no}
</update>

<select id="authManagerList" parameterType="jeong.admin.AdminVo" resultType="jeong.admin.AdminVo">
	SELECT 
			A.CODE AS CODE,
	        B.DETAIL_NO AS DETAIL_NO,
	        A.CODE_NAME AS CODE_NAME,
	        B.VAR_CODE AS VAR_CODE,
	       	B.VAR_NAME AS VAR_NAME
  		FROM COMMON_CODE A, COMMON_CODE_DETAIL B
 			WHERE A.CODE = B.CODE AND A.CODE = 1 AND A.USE_YN = 'Y'
</select>

<select id="menuManagerList" parameterType="jeong.menu.MenuVo" resultType="jeong.menu.MenuVo">
	<![CDATA[
        	SELECT   
        			  NO,
					  DEPTH_1,
					  DEPTH_2,
					  DEPTH_3,
					  MENU_ID,
					  MENU_NAME,
					  MENU_URL,
					  SORT,
					  USE_YN,
					  ADMIN_YN
				FROM(
     		   SELECT 
     		          NO,
					  DEPTH_1,
					  DEPTH_2,
					  DEPTH_3,
					  MENU_ID,
					  MENU_NAME,
					  MENU_URL,
					  SORT,
					  USE_YN,
					  ADMIN_YN
				FROM ROLE_MENU
				WHERE 1=1
				  AND USE_YN = 'Y'
				  AND ADMIN_YN = 'N'
				) A
				 ORDER BY SORT ASC
        ]]>
</select>

<select id="adminMemberlist" parameterType="jeong.login.MemberDetail" resultType="jeong.login.MemberDetail">
	SELECT
		A.MEMBER_NO AS MEMBER_NO,
		A.MEMBER_ID AS MEMBER_ID,
		'시크릿' AS MEMBER_PWD,
		A.MEMBER_ROLE AS MEMBER_ROLE,
		A.MEMBER_NAME AS MEMBER_NAME,
		A.MEMBER_MAIL AS MEMBER_MAIL,
		A.MEMBER_PHON AS MEMBER_PHON
	FROM
		USER_INFO A
	WHERE 1=1
		<if test="member_id != null">
			AND MEMBER_ID = ${ member_id}
		</if>
		<if test="member_role != null">
			AND MEMBER_ROLE = ${member_role}
		</if>
		<if test="member_name != null">
			AND MEMBER_NAME = ${member_name}
		</if>
		<if test="member_mail != null">
			AND MEMBER_MAIL = ${member_mail}
		</if>		
		<if test="member_phon != null">
			AND MEMBER_PHON = ${member_phon}
		</if>
		AND A.DEL_YN = 'N'
	ORDER BY MEMBER_NO ASC
</select>

</mapper>